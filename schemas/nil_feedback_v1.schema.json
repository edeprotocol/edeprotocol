{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://schema.edeprotocol.org/nil_feedback_v1.schema.json",
  "title": "Neuro-Intent Language â€“ Feedback v1",
  "type": "object",
  "required": [
    "version",
    "feedback_id",
    "source",
    "target",
    "mode",
    "payload"
  ],
  "properties": {
    "version": { "type": "string", "const": "1.0" },
    "feedback_id": {
      "type": "string",
      "pattern": "^fbk_[a-zA-Z0-9]+$"
    },
    "source": {
      "type": "string",
      "pattern": "^did:ede:[a-zA-Z0-9:_-]+$"
    },
    "target": {
      "type": "string",
      "pattern": "^did:ede:[a-zA-Z0-9:_-]+$"
    },
    "target_class": {
      "type": "string",
      "enum": ["H", "H_PLUS"]
    },
    "mode": {
      "type": "string",
      "enum": ["NEURAL_STIM", "VISUAL", "AUDIO", "HAPTIC"]
    },
    "payload": {
      "type": "object",
      "description": "Feedback parameters, device-specific.",
      "additionalProperties": true
    },
    "context": {
      "type": "object",
      "properties": {
        "session_id": { "type": "string" },
        "related_intent_id": { "type": "string" }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
